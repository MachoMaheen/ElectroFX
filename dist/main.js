(()=>{"use strict";var e={157:e=>{e.exports=require("electron")},672:function(e,r,t){var i=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,i,o)}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),o=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&i(r,e,t);return o(r,e),r};Object.defineProperty(r,"__esModule",{value:!0});const s=t(157),a=n(t(928)),c=n(t(896)),l=n(t(857));let d=null;function p(){d=new s.BrowserWindow({width:900,height:700,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:a.join(__dirname,"preload.js")}});const e=a.join(__dirname,"index.html");console.log("Current directory:",__dirname),console.log("HTML path:",e),console.log("HTML file exists:",c.existsSync(e)),d.loadFile(e),d.on("closed",(()=>{d=null}))}s.app.whenReady().then((()=>{p(),s.app.on("activate",(()=>{null===d&&p()}))})),s.app.on("window-all-closed",(()=>{"darwin"!==process.platform&&s.app.quit()})),s.ipcMain.handle("test-ipc",(async()=>({success:!0,message:"IPC is working!"}))),s.ipcMain.handle("list-directory",(async(e,r)=>{try{const e=r||l.homedir();console.log("Listing directory:",e);const t=await c.promises.readdir(e),i=await Promise.all(t.map((async r=>{const t=a.join(e,r);try{const e=await c.promises.stat(t);return{name:r,path:t,isDirectory:e.isDirectory(),size:e.size,created:e.birthtime,modified:e.mtime}}catch(e){return{name:r,path:t,isDirectory:!1,size:0,created:new Date,modified:new Date,error:"Permission denied"}}})));return{path:e,files:i}}catch(e){return console.error("Error listing directory:",e),{error:e.message}}})),s.ipcMain.handle("delete-file",(async(e,r)=>{try{return await c.promises.access(r),(await c.promises.stat(r)).isDirectory()?await c.promises.rmdir(r,{recursive:!0}):await c.promises.unlink(r),{success:!0}}catch(e){return console.error("Error deleting file/directory:",e),"EACCES"===e.code?{error:"Permission denied. This file requires elevated privileges to delete.",requiresElevation:!0}:{error:e.message}}})),s.ipcMain.handle("select-directory",(async()=>{if(!d)return{canceled:!0};const e=await s.dialog.showOpenDialog(d,{properties:["openDirectory"]});return!e.canceled&&e.filePaths.length>0?{path:e.filePaths[0]}:{canceled:!0}}))},857:e=>{e.exports=require("os")},896:e=>{e.exports=require("fs")},928:e=>{e.exports=require("path")}},r={};!function t(i){var o=r[i];if(void 0!==o)return o.exports;var n=r[i]={exports:{}};return e[i].call(n.exports,n,n.exports,t),n.exports}(672)})();